This will be a breakdown of how to set up your Ubuntu target machine for AWS Pentesting Practice. 

NOTE: You may only interact with your virtual instances. You cannot target other users instances or the AWS infrastructure. When in doubt contact AWS Support for more information.

Users should have an AWS account. This environment with be mostly free minus some charges AWS may make on your debit card. They refer to this as a "HOLD" that will be reimbursed as a discount on your monthly invoice. I recommend getting a Prepaid Debit card and put maybe $5 on it and add that as your form of payment.

Vulnerable Ubuntu:
Once in your AWS environment there will be a small section in the top left of the page that says "Services". Click this and select "Compute", then "EC2".
You will be redirected to a new page that will have a list of options, here you will select "Instances" and you will be redirected.
Here you will select Launch Instance in the upper right hand corner or in the center of the page.
You will be redirected to a new page to build out the instance. Here you can name the instance, select the image (Which will be Ubuntu), Instance Type, etc.
You will have to search for this particular image "Ubuntu 16.04 LTS" and it should be the first one. 
Once you select it, you will have to make modifications in order maintain a free instance. This can be done in Instance Type.
Develop a key pair.
Maintain Default, except VPC and Subnet. Select a Subnet and note the VPC ID and Subnet ID to include other devices to this subnet.
And you can Launch the instance.

Vulnerable Services:
Login via ssh: sudo ssh -i <pem file> <IP Address> Key Permissions must be 0700
Update: sudo apt-get update && sudo apt-get dist-upgrade
Git Clone Vulnerable services:
  git clone https://github.com/nikdubois/vsftpd-2.3.4-infected.git
  sudo apt-get install build essential
cd into the vsftpd-2.3.4-infected folder
Update the MakeFile: Add the -lcrypt to the LINK = portion
  #Makefile for systems with GNU tools
   CC         =     gcc
   INSTALL    =     install
   IFLAGS     =     -idurafter dummyinc
   #CFLAGS    =     -g
   CFLAGS     =     -O2 -Wall -W -Wshadow #-pedantis
   LIBS       =     `./vsf_findlibs.sh`
   LINKS      =     -W1,-s,-lcrypt
   
Save and run the "make" command. (Use sudo)
Create a user called nobody and a folder called empty:
  sudo useradd nobody
  sudo mkdir /usr/share/empty

Run the following for installation:
  sudo cp vsftpd /usr/local/sbin/vsftpd
  sudo cp vsftpd.8 /usr/local/man/man8
  sudo cp vsftpd.conf.5 /usr/local/man/man5
  sudo cp vsftpd.conf /etc
  
Run the FTP binary:
  /usr/local/sbin/vsftpd &
Determine that you can connect:
  ftp localhost
    - You will receive a user error this is OK

Set up Anonymous Access to FTP:
   sudo mkdir /var/ftp
   sudo useradd -d /var/ftp ftp
   sudo chown root:root /var/ftp
   sudo chmod og-w /var/ftp
   
 Finally enable local login, Update /etc/vsftpd.conf:
    #Uncomment this to allow local users to log in.
    local_enable=YES
    #
 **********************************************************************END OF FILE***************************************************************************
